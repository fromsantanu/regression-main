# 📚 **🌟 Quantile Regression**

---

### 📝 **🔹 Step 0: Problem Setup**

**Example Problem:**
Estimate the **median (50th percentile) house price** based on **area and bedrooms**, or analyze different quantiles (e.g. 25th, 75th) to understand distributional effects.

---

### 🔹 **Step 1: Conceptual Overview**

✅ **What is Quantile Regression?**

* Unlike linear regression (predicts **mean** of dependent variable), quantile regression predicts **conditional quantiles** (e.g. median).
* Useful for:

  * **Skewed data** or non-normal error distributions.
  * Understanding **distributional impacts** of predictors.

---

### 🔹 **Step 2: Import Libraries**

```python
import pandas as pd
import statsmodels.formula.api as smf
```

---

### 🔹 **Step 3: Create Sample Data**

```python
# Sample dataset
data = {
    'Area': [500, 750, 1000, 1250, 1500],
    'Bedrooms': [1, 2, 2, 3, 3],
    'Price': [150000, 200000, 250000, 300000, 350000]
}
df = pd.DataFrame(data)
print(df)
```

---

### 🔹 **Step 4: Fit Quantile Regression Model**

```python
# Median regression (quantile=0.5)
model = smf.quantreg('Price ~ Area + Bedrooms', data=df)
result = model.fit(q=0.5)  # q=0.5 for median
print(result.summary())
```

---

### 🔹 **Step 5: Interpret Output**

✅ **Key points:**

* **Coefficients:** Effect of predictors on the **median price**.
* **Different quantiles** provide insights into **heterogeneous impacts** (e.g. impact may differ at lower vs upper price levels).

---

### 🔹 **Step 6: Predict for New Data**

```python
new_data = pd.DataFrame({
    'Area': [1100, 1600],
    'Bedrooms': [2, 3]
})

predicted_median = result.predict(new_data)
print(predicted_median)
```

---

### 🔹 **Step 7: Fit for Different Quantiles**

```python
# For 25th percentile
result_25 = model.fit(q=0.25)
print("25th percentile:\n", result_25.summary())

# For 75th percentile
result_75 = model.fit(q=0.75)
print("75th percentile:\n", result_75.summary())
```

✅ **Why this is powerful?**

* Shows **variation in predictor effects** across price distribution (e.g. impact may be stronger for expensive houses).

---

### 🔹 **Step 8: Applicability of Quantile Regression**

| **When to use?**                                           | **When not to use?**                          |
| ---------------------------------------------------------- | --------------------------------------------- |
| Interested in **predicting medians or other quantiles**    | Only interested in **mean prediction**        |
| **Skewed or heteroscedastic data**                         | Homoscedastic and normally distributed errors |
| Understanding **differential effects across distribution** | Simple linear modeling suffices               |

---

### 📝 **End of Part 9**

---
